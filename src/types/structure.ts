import type { BiomeType } from './map';

/**
 * 構造物定義
 * - pattern: ブロックIDの3D配列（0は透過＝何もしない）
 * - allowedBiomes: 出現を許可するバイオーム
 * - chance: 候補地点での出現確率 [0..1]
 */
export interface Structure {
  id: string;
  width: number;
  height: number;
  top: number;
  pattern: number[][][];  // blockIdの2Dマップ
  allowedBiomes?: BiomeType[]; // このバイオームでのみ出現
  chance?: number; // 候補地での出現確率（0-1）
}

// 3次元になったので一旦コメントアウト
// いつか構成含めて実装する予定

export const STRUCTURES: Record<string, Structure> = {
  // サンプル家
  house: {
    id: 'house',
    width: 7,
    height: 7,
    top: 7,
    pattern: [
      // y=0 (床)
      [
        [0,10,9,9,9,10,0],
        [0,9,11,11,11,9,0],
        [0,9,11,11,11,9,0],
        [0,9,11,11,11,9,0],
        [0,9,11,11,11,9,0],
        [0,10,9,9,9,10,0],
        [0,0,0,0,0,0,0],
      ],
      [
        [0,0,0,0,0,0,0],
        [0,10,9,9,9,10,0],
        [0,9,0,0,0,9,0],
        [0,9,0,0,0,9,0],
        [0,9,0,0,0,9,0],
        [0,10,9,13,9,10,0],
        [0,0,0,0,0,0,0],
      ],
      [
        [0,0,0,0,0,0,0],
        [0,10,9,9,9,10,0],
        [0,10,0,0,0,10,0],
        [0,10,0,0,0,10,0],
        [0,10,0,0,0,10,0],
        [0,10,9,12,9,10,0],
        [0,0,0,0,0,0,0],
      ],
      [
        [0,0,0,0,0,0,0],
        [0,10,9,9,9,10,0],
        [0,9,0,0,0,9,0],
        [0,9,0,0,0,9,0],
        [0,9,0,0,0,9,0],
        [0,10,9,9,9,10,0],
        [0,0,0,0,0,0,0],
      ],
      [
        [11,11,11,11,11,11,11],
        [11,11,11,11,11,11,11],
        [11,11,11,11,11,11,11],
        [11,11,11,11,11,11,11],
        [11,11,11,11,11,11,11],
        [11,11,11,11,11,11,11],
        [11,11,11,11,11,11,11],
      ],
      [
        [0,0,0,0,0,0,0],
        [0,11,11,11,11,11,0],
        [0,11,11,11,11,11,0],
        [0,11,11,11,11,11,0],
        [0,11,11,11,11,11,0],
        [0,11,11,11,11,11,0],
        [0,0,0,0,0,0,0],
      ],
      [
        [0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0],
        [0,0,11,11,11,0,0],
        [0,0,11,11,11,0,0],
        [0,0,11,11,11,0,0],
        [0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0],
      ]
    ],
    allowedBiomes: ['Neutral', 'Fire', 'Water', 'Ice', 'Lightning', 'Earth', 'Air'],
    chance: 0.05,
  },
  tree: {
    id: 'tree',
    width: 1,
    height: 1,
    top: 3,
    pattern: [
      [[10]],
      [[10]],
      [[10]]
    ],
    allowedBiomes: ['Neutral', 'Earth'],
    chance: 0.1,
  },
  cactus: {
    id: 'cactus',
    width: 1,
    height: 1,
    top: 2,
    pattern: [
      [[9]],
      [[9]]
    ],
    allowedBiomes: ['Fire'],
    chance: 0.05,
  },
  rock: {
    id: 'rock',
    width: 1,
    height: 1,
    top: 1,
    pattern: [
      [[3]]
    ],
    allowedBiomes: ['Lightning', 'Earth'],
    chance: 0.08,
  }
};